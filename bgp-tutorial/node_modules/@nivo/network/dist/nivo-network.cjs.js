"use strict";var e=require("react"),n=require("@nivo/core"),o=require("@react-spring/web"),i=require("react/jsx-runtime"),t=require("@nivo/tooltip"),r=require("d3-force"),d=require("@nivo/theming"),a=require("@nivo/colors"),s=require("@nivo/annotations");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},c.apply(null,arguments)}function l(e,n){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==n.indexOf(i))continue;o[i]=e[i]}return o}var u=e.memo((function(e){var n=e.node,t=e.animated,r=e.onClick,d=e.onMouseEnter,a=e.onMouseMove,s=e.onMouseLeave;return i.jsx(o.animated.circle,{"data-testid":"node."+n.id,transform:o.to([t.x,t.y,t.scale],(function(e,n,o){return"translate("+e+","+n+") scale("+o+")"})),r:o.to([t.size],(function(e){return e/2})),fill:t.color,strokeWidth:t.borderWidth,stroke:t.borderColor,opacity:t.opacity,onClick:r?function(e){return r(n,e)}:void 0,onMouseEnter:d?function(e){return d(n,e)}:void 0,onMouseMove:a?function(e){return a(n,e)}:void 0,onMouseLeave:s?function(e){return s(n,e)}:void 0})})),v=e.memo((function(e){var n=e.link,t=e.animated,r=e.blendMode;return i.jsx(o.animated.line,{"data-testid":"link."+n.id,stroke:t.color,style:{mixBlendMode:r},strokeWidth:n.thickness,strokeLinecap:"round",opacity:t.opacity,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2})})),f={layers:["links","nodes","annotations"],linkDistance:30,centeringStrength:1,repulsivity:10,distanceMin:1,distanceMax:1/0,iterations:120,nodeSize:12,activeNodeSize:18,inactiveNodeSize:8,nodeColor:"#000000",nodeBorderWidth:0,nodeBorderColor:{from:"color"},linkThickness:1,linkColor:{from:"source.color"},isInteractive:!0,defaultActiveNodeIds:[],nodeTooltip:function(e){var n=e.node;return i.jsx(t.BasicTooltip,{id:n.id,enableChip:!0,color:n.color})},annotations:[],animate:!0,motionConfig:"gentle",role:"img"},h=c({},f,{nodeComponent:u,linkComponent:v,linkBlendMode:"normal"}),k=c({},f,{renderNode:function(e,n){e.fillStyle=n.color,e.beginPath(),e.arc(n.x,n.y,n.size/2,0,2*Math.PI),e.fill(),n.borderWidth>0&&(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.stroke())},renderLink:function(e,n){e.strokeStyle=n.color,e.lineWidth=n.thickness,e.beginPath(),e.moveTo(n.source.x,n.source.y),e.lineTo(n.target.x,n.target.y),e.stroke()},pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),p=["index"],m=function(n){return e.useMemo((function(){return"function"==typeof n?n:function(){return n}}),[n])},g=function(n){var o=n.center,i=n.nodes,t=n.links,s=n.linkDistance,u=void 0===s?f.linkDistance:s,v=n.centeringStrength,h=void 0===v?f.centeringStrength:v,k=n.repulsivity,g=void 0===k?f.repulsivity:k,C=n.distanceMin,x=void 0===C?f.distanceMin:C,y=n.distanceMax,M=void 0===y?f.distanceMax:y,b=n.iterations,z=void 0===b?f.iterations:b,S=n.nodeSize,N=void 0===S?f.nodeSize:S,I=n.activeNodeSize,W=void 0===I?f.activeNodeSize:I,w=n.inactiveNodeSize,R=void 0===w?f.inactiveNodeSize:w,T=n.nodeColor,B=void 0===T?f.nodeColor:T,j=n.nodeBorderWidth,A=void 0===j?f.nodeBorderWidth:j,D=n.nodeBorderColor,E=void 0===D?f.nodeBorderColor:D,L=n.linkThickness,H=void 0===L?f.linkThickness:L,P=n.linkColor,q=void 0===P?f.linkColor:P,F=n.isInteractive,O=void 0===F?f.isInteractive:F,G=n.defaultActiveNodeIds,J=void 0===G?f.defaultActiveNodeIds:G,K=e.useState(null),Q=K[0],U=K[1],V=e.useState(null),X=V[0],Y=V[1],Z=function(n){var o=n.linkDistance,i=n.centeringStrength,t=n.repulsivity,d=n.distanceMin,a=n.distanceMax,s=n.center,c=m(o),l=s[0],u=s[1];return e.useMemo((function(){return{link:r.forceLink().distance((function(e){return c(e.data)})).strength(i),charge:r.forceManyBody().strength(-t).distanceMin(d).distanceMax(a),center:r.forceCenter(l,u)}}),[c,i,t,d,a,l,u])}({linkDistance:u,centeringStrength:h,repulsivity:g,distanceMin:x,distanceMax:M,center:o});e.useEffect((function(){var e=i.map((function(e){return{id:e.id,data:c({},e),index:0,x:0,y:0,vx:0,vy:0}})),n=t.map((function(n){return{data:c({},n),index:0,source:e.find((function(e){return e.id===n.source})),target:e.find((function(e){return e.id===n.target}))}})),o=r.forceSimulation(e).force("link",Z.link.links(n)).force("charge",Z.charge).force("center",Z.center).stop();return o.tick(z),U(e),Y(n),function(){o.stop()}}),[i,t,Z,z,U,Y]);var $=e.useState(J),_=$[0],ee=$[1],ne=function(n){var o=n.size,i=n.activeSize,t=n.inactiveSize,r=n.color,s=n.borderWidth,l=n.borderColor,u=n.isInteractive,v=n.activeNodeIds,f=d.useTheme(),h=m(o),k=m(r),p=m(s),g=a.useInheritedColor(l,f),C=e.useCallback((function(e){var n=k(e.data);return{size:h(e.data),color:n,borderWidth:p(e.data),borderColor:g(c({},e,{color:n}))}}),[h,k,p,g]),x=m(i),y=e.useCallback((function(e){var n=k(e.data);return{size:x(e.data),color:n,borderWidth:p(e.data),borderColor:g(c({},e,{color:n}))}}),[x,k,p,g]),M=m(t),b=e.useCallback((function(e){var n=k(e.data);return{size:M(e.data),color:n,borderWidth:p(e.data),borderColor:g(c({},e,{color:n}))}}),[M,k,p,g]);return e.useCallback((function(e){return u&&0!==v.length?v.includes(e.id)?y(e):b(e):C(e)}),[C,y,b,u,v])}({size:N,activeSize:W,inactiveSize:R,color:B,borderWidth:A,borderColor:E,isInteractive:O,activeNodeIds:_}),oe=e.useMemo((function(){return null===Q?null:Q.map((function(e){return c({},e,ne(e))}))}),[Q,ne]),ie=d.useTheme(),te=m(H),re=a.useInheritedColor(q,ie),de=e.useMemo((function(){return null===X||null===oe?null:X.map((function(e){var n=e.index,o=l(e,p),i={id:o.source.id+"."+o.target.id,data:o.data,index:n,source:oe.find((function(e){return e.id===o.source.id})),target:oe.find((function(e){return e.id===o.target.id}))};return c({},i,{thickness:te(i),color:re(i)})}))}),[X,oe,te,re]);return{nodes:oe,links:de,activeNodeIds:_,setActiveNodeIds:ee}},C=function(e){return{x:e.x,y:e.y}},x=function(e){return{size:e.size,width:e.size,height:e.size}},y=function(e,n){return s.useAnnotations({data:e,annotations:n,getPosition:C,getDimensions:x})},M=function(t){var r=t.links,d=t.linkComponent,a=t.blendMode,s=n.useMotionConfig(),c=s.animate,l=s.config,u=e.useMemo((function(){return[function(e){return{x1:e.source.x,y1:e.source.y,x2:e.source.x,y2:e.source.y,color:e.color,opacity:0}},function(e){return{x1:e.source.x,y1:e.source.y,x2:e.target.x,y2:e.target.y,color:e.color,opacity:1}}]}),[]),v=u[0],f=u[1],h=o.useTransition(r,{keys:function(e){return e.id},initial:f,from:v,enter:f,update:f,expires:!0,config:l,immediate:!c});return i.jsx(i.Fragment,{children:h((function(n,o){return e.createElement(d,{key:o.id,link:o,animated:n,blendMode:a})}))})},b=function(r){var d=r.nodes,a=r.nodeComponent,s=r.onMouseEnter,c=r.onMouseMove,l=r.onMouseLeave,u=r.onClick,v=r.tooltip,f=r.setActiveNodeIds,h=r.isInteractive,k=n.useMotionConfig(),p=k.animate,m=k.config,g=e.useMemo((function(){return[function(e){return{x:e.x,y:e.y,size:e.size,color:e.color,borderWidth:e.borderWidth,borderColor:e.borderColor,scale:0,opacity:0}},function(e){return{x:e.x,y:e.y,size:e.size,color:e.color,borderWidth:e.borderWidth,borderColor:e.borderColor,scale:1,opacity:1}},function(e){return{x:e.x,y:e.y,size:e.size,color:e.color,borderWidth:e.borderWidth,borderColor:e.borderColor,scale:0,opacity:0}}]}),[]),C=g[0],x=g[1],y=g[2],M=o.useTransition(d,{keys:function(e){return e.id},initial:x,from:C,enter:x,update:x,leave:y,config:m,immediate:!p}),b=t.useTooltip(),z=b.showTooltipFromEvent,S=b.hideTooltip,N=e.useCallback((function(n,o){z(e.createElement(v,{node:n}),o),f([n.id]),null==s||s(n,o)}),[z,v,f,s]),I=e.useCallback((function(n,o){z(e.createElement(v,{node:n}),o),null==c||c(n,o)}),[z,v,c]),W=e.useCallback((function(e,n){S(),f([]),null==l||l(e,n)}),[S,f,l]);return i.jsx(i.Fragment,{children:M((function(n,o){return e.createElement(a,{key:o.id,node:o,animated:n,onMouseEnter:h?N:void 0,onMouseMove:h?I:void 0,onMouseLeave:h?W:void 0,onClick:h?u:void 0})}))})},z=function(e){var n=e.nodes,o=e.annotations,t=y(n,o);return i.jsx(i.Fragment,{children:t.map((function(e,n){return i.jsx(s.Annotation,c({},e),n)}))})},S=["isInteractive","animate","motionConfig","theme","renderWrapper"],N=function(o){var t=o.width,r=o.height,d=o.margin,a=o.data,s=a.nodes,c=a.links,l=o.linkDistance,u=void 0===l?h.linkDistance:l,v=o.centeringStrength,f=void 0===v?h.centeringStrength:v,k=o.repulsivity,p=void 0===k?h.repulsivity:k,m=o.distanceMin,C=void 0===m?h.distanceMin:m,x=o.distanceMax,y=void 0===x?h.distanceMax:x,S=o.iterations,N=void 0===S?h.iterations:S,I=o.layers,W=void 0===I?h.layers:I,w=o.nodeComponent,R=void 0===w?h.nodeComponent:w,T=o.nodeSize,B=void 0===T?h.nodeSize:T,j=o.activeNodeSize,A=void 0===j?h.activeNodeSize:j,D=o.inactiveNodeSize,E=void 0===D?h.inactiveNodeSize:D,L=o.nodeColor,H=void 0===L?h.nodeColor:L,P=o.nodeBorderWidth,q=void 0===P?h.nodeBorderWidth:P,F=o.nodeBorderColor,O=void 0===F?h.nodeBorderColor:F,G=o.linkComponent,J=void 0===G?h.linkComponent:G,K=o.linkThickness,Q=void 0===K?h.linkThickness:K,U=o.linkColor,V=void 0===U?h.linkColor:U,X=o.linkBlendMode,Y=void 0===X?h.linkBlendMode:X,Z=o.annotations,$=void 0===Z?h.annotations:Z,_=o.isInteractive,ee=void 0===_?h.isInteractive:_,ne=o.defaultActiveNodeIds,oe=void 0===ne?h.defaultActiveNodeIds:ne,ie=o.nodeTooltip,te=void 0===ie?h.nodeTooltip:ie,re=o.onMouseEnter,de=o.onMouseMove,ae=o.onMouseLeave,se=o.onClick,ce=o.role,le=void 0===ce?h.role:ce,ue=o.ariaLabel,ve=o.ariaLabelledBy,fe=o.ariaDescribedBy,he=o.forwardedRef,ke=n.useDimensions(t,r,d),pe=ke.margin,me=ke.innerWidth,ge=ke.innerHeight,Ce=ke.outerWidth,xe=ke.outerHeight,ye=g({center:[me/2,ge/2],nodes:s,links:c,linkDistance:u,centeringStrength:f,repulsivity:p,distanceMin:C,distanceMax:y,iterations:N,nodeSize:B,activeNodeSize:A,inactiveNodeSize:E,nodeColor:H,nodeBorderWidth:q,nodeBorderColor:O,linkThickness:Q,linkColor:V,isInteractive:ee,defaultActiveNodeIds:oe}),Me=ye.nodes,be=ye.links,ze=ye.activeNodeIds,Se=ye.setActiveNodeIds,Ne={links:null,nodes:null,annotations:null};W.includes("links")&&null!==be&&(Ne.links=i.jsx(M,{links:be,linkComponent:J,blendMode:Y},"links")),W.includes("nodes")&&null!==Me&&(Ne.nodes=i.jsx(b,{nodes:Me,nodeComponent:R,onMouseEnter:re,onMouseMove:de,onMouseLeave:ae,onClick:se,tooltip:te,setActiveNodeIds:Se,isInteractive:ee},"nodes")),W.includes("annotations")&&null!==Me&&(Ne.annotations=i.jsx(z,{nodes:Me,annotations:$},"annotations"));var Ie=e.useMemo((function(){return{nodes:Me||[],links:be||[],activeNodeIds:ze,setActiveNodeIds:Se}}),[Me,be,ze,Se]);return i.jsx(n.SvgWrapper,{width:Ce,height:xe,margin:pe,role:le,ariaLabel:ue,ariaLabelledBy:ve,ariaDescribedBy:fe,ref:he,children:W.map((function(n,o){var t;return"function"==typeof n?i.jsx(e.Fragment,{children:e.createElement(n,Ie)},o):null!=(t=null==Ne?void 0:Ne[n])?t:null}))})},I=e.forwardRef((function(e,o){var t=e.isInteractive,r=void 0===t?h.isInteractive:t,d=e.animate,a=void 0===d?h.animate:d,s=e.motionConfig,u=void 0===s?h.motionConfig:s,v=e.theme,f=e.renderWrapper,k=l(e,S);return i.jsx(n.Container,{animate:a,isInteractive:r,motionConfig:u,renderWrapper:f,theme:v,children:i.jsx(N,c({},k,{isInteractive:r,forwardedRef:o}))})})),W=["defaultWidth","defaultHeight","onResize","debounceResize"],w=e.forwardRef((function(e,o){var t=e.defaultWidth,r=e.defaultHeight,d=e.onResize,a=e.debounceResize,s=l(e,W);return i.jsx(n.ResponsiveWrapper,{defaultWidth:t,defaultHeight:r,onResize:d,debounceResize:a,children:function(e){var n=e.width,t=e.height;return i.jsx(I,c({},s,{width:n,height:t,ref:o}))}})})),R=["theme","isInteractive","animate","motionConfig","renderWrapper"],T=function(o){var r=o.width,a=o.height,c=o.margin,l=o.pixelRatio,u=void 0===l?k.pixelRatio:l,v=o.data,f=v.nodes,h=v.links,p=o.linkDistance,m=void 0===p?k.linkDistance:p,C=o.centeringStrength,x=void 0===C?k.centeringStrength:C,M=o.repulsivity,b=void 0===M?k.repulsivity:M,z=o.distanceMin,S=void 0===z?k.distanceMin:z,N=o.distanceMax,I=void 0===N?k.distanceMax:N,W=o.iterations,w=void 0===W?k.iterations:W,R=o.layers,T=void 0===R?k.layers:R,B=o.renderNode,j=void 0===B?k.renderNode:B,A=o.nodeSize,D=void 0===A?k.nodeSize:A,E=o.activeNodeSize,L=void 0===E?k.activeNodeSize:E,H=o.inactiveNodeSize,P=void 0===H?k.inactiveNodeSize:H,q=o.nodeColor,F=void 0===q?k.nodeColor:q,O=o.nodeBorderWidth,G=void 0===O?k.nodeBorderWidth:O,J=o.nodeBorderColor,K=void 0===J?k.nodeBorderColor:J,Q=o.renderLink,U=void 0===Q?k.renderLink:Q,V=o.linkThickness,X=void 0===V?k.linkThickness:V,Y=o.linkColor,Z=void 0===Y?k.linkColor:Y,$=o.annotations,_=void 0===$?k.annotations:$,ee=o.isInteractive,ne=void 0===ee?k.isInteractive:ee,oe=o.defaultActiveNodeIds,ie=void 0===oe?k.defaultActiveNodeIds:oe,te=o.nodeTooltip,re=void 0===te?k.nodeTooltip:te,de=o.onClick,ae=o.role,se=o.forwardedRef,ce=e.useRef(null),le=n.useDimensions(r,a,c),ue=le.margin,ve=le.innerWidth,fe=le.innerHeight,he=le.outerWidth,ke=le.outerHeight,pe=g({center:[ve/2,fe/2],nodes:f,links:h,linkDistance:m,centeringStrength:x,repulsivity:b,distanceMin:S,distanceMax:I,iterations:w,nodeSize:D,activeNodeSize:L,inactiveNodeSize:P,nodeColor:F,nodeBorderWidth:G,nodeBorderColor:K,linkThickness:X,linkColor:Z,isInteractive:ne,defaultActiveNodeIds:ie}),me=pe.nodes,ge=pe.links,Ce=pe.activeNodeIds,xe=pe.setActiveNodeIds,ye=y(me,_),Me=s.useComputedAnnotations({annotations:ye}),be=e.useMemo((function(){return{nodes:me||[],links:ge||[],activeNodeIds:Ce,setActiveNodeIds:xe}}),[me,ge,Ce,xe]),ze=d.useTheme();e.useEffect((function(){if(null!==ce.current){ce.current.width=he*u,ce.current.height=ke*u;var e=ce.current.getContext("2d");e.scale(u,u),e.fillStyle=ze.background,e.fillRect(0,0,he,ke),e.translate(ue.left,ue.top),T.forEach((function(n){"links"===n&&null!==ge?ge.forEach((function(n){return U(e,n)})):"nodes"===n&&null!==me?me.forEach((function(n){return j(e,n)})):"annotations"===n?s.renderAnnotationsToCanvas(e,{annotations:Me,theme:ze}):"function"==typeof n&&null!==me&&null!==ge&&n(e,be)}))}}),[ce,he,ke,ue.left,ue.top,u,T,ze,me,ge,j,U,Me,be]);var Se=e.useCallback((function(e){if(ce.current&&null!==me){var o=n.getRelativeCursor(ce.current,e),i=o[0],t=o[1];return me.find((function(e){return n.getDistance(e.x,e.y,i-ue.left,t-ue.top)<=e.size/2}))}}),[ce,ue,me]),Ne=t.useTooltip(),Ie=Ne.showTooltipFromEvent,We=Ne.hideTooltip,we=e.useCallback((function(n){var o=Se(n);o?(Ie(e.createElement(re,{node:o}),n),xe([o.id])):(We(),xe([]))}),[Se,Ie,re,We,xe]),Re=e.useCallback((function(){We(),xe([])}),[We,xe]),Te=e.useCallback((function(e){if(de){var n=Se(e);n&&de(n,e)}}),[Se,de]);return i.jsx("canvas",{ref:n.mergeRefs(ce,se),width:he*u,height:ke*u,style:{width:he,height:ke,cursor:ne?"auto":"normal"},onClick:ne?Te:void 0,onMouseEnter:ne?we:void 0,onMouseLeave:ne?Re:void 0,onMouseMove:ne?we:void 0,role:ae})},B=e.forwardRef((function(e,o){var t=e.theme,r=e.isInteractive,d=void 0===r?k.isInteractive:r,a=e.animate,s=void 0===a?k.animate:a,u=e.motionConfig,v=void 0===u?k.motionConfig:u,f=e.renderWrapper,h=l(e,R);return i.jsx(n.Container,{isInteractive:d,animate:s,motionConfig:v,theme:t,renderWrapper:f,children:i.jsx(T,c({},h,{isInteractive:d,forwardedRef:o}))})})),j=["defaultWidth","defaultHeight","onResize","debounceResize"],A=e.forwardRef((function(e,o){var t=e.defaultWidth,r=e.defaultHeight,d=e.onResize,a=e.debounceResize,s=l(e,j);return i.jsx(n.ResponsiveWrapper,{defaultWidth:t,defaultHeight:r,onResize:d,debounceResize:a,children:function(e){var n=e.width,t=e.height;return i.jsx(B,c({},s,{width:n,height:t,ref:o}))}})}));exports.Network=I,exports.NetworkCanvas=B,exports.ResponsiveNetwork=w,exports.ResponsiveNetworkCanvas=A,exports.canvasDefaultProps=k,exports.commonDefaultProps=f,exports.svgDefaultProps=h,exports.useNetwork=g,exports.useNodeAnnotations=y;
//# sourceMappingURL=nivo-network.cjs.js.map
